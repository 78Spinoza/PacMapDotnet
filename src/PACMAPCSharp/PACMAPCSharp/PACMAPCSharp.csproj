<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net8.0</TargetFramework>
    <RootNamespace>PacMapSharp</RootNamespace>
    <AssemblyName>PacMapSharp</AssemblyName>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <PlatformTarget>x64</PlatformTarget>
    <RuntimeIdentifiers>win-x64;linux-x64</RuntimeIdentifiers>

    <!-- Enhanced NuGet metadata -->
    <GenerateDocumentationFile>true</GenerateDocumentationFile>
    <PackageId>PacMapSharp</PackageId>
    <Version>2.8.29</Version>
    <Authors>Amin Gholiha</Authors>
    <Company>ID Soft AB</Company>
    <Product>PacMapSharp Enhanced with HNSW</Product>
    <Title>PACMAP for .NET with HNSW Optimization &amp; AI Safety</Title>
    <Description>Production-ready PACMAP library with 3.1-12.5x performance optimization, HNSW acceleration, and cross-platform 64-bit binaries. Features: PACMAP (Pairwise Controlled Manifold Approximation and Projection) algorithm with OpenMP 8-thread parallelization, AVX2/AVX512 SIMD optimization, HNSW (Hierarchical Navigable Small World) acceleration, advanced quantization (60% storage savings), comprehensive progress reporting, model persistence, and cross-platform deployment. Perfect for production AI pipelines requiring high-performance dimensionality reduction with enterprise-grade stability.</Description>
    <PackageTags>pacmap;hnsw;ai-safety;outlier-detection;dimensionality-reduction;machine-learning;embedding;manifold-learning;production-ml;data-validation;nearest-neighbors;performance-optimization;memory-efficient;multi-dimensional;progress-reporting;model-persistence;adam-optimizer</PackageTags>
    <RepositoryUrl>https://github.com/78Spinoza/PacMapDotnet</RepositoryUrl>
    <RepositoryType>git</RepositoryType>
    <PackageLicenseExpression>GPL-3.0-or-later</PackageLicenseExpression>
    <PackageProjectUrl>https://github.com/78Spinoza/PacMapDotnet</PackageProjectUrl>
    <PackageReadmeFile>README.md</PackageReadmeFile>
    <PackageReleaseNotes><![CDATA[
ðŸš€ v2.8.29 - PERFORMANCE OPTIMIZED RELEASE - Production-Ready PACMAP

âœ… MASSIVE PERFORMANCE OPTIMIZATIONS (3.1-12.5x speedup):
- OpenMP 8-thread parallelization with atomic operations (1.5-2x speedup)
- Eigen SIMD vectorization with AVX2/AVX512 support (1.5-3x speedup)
- Advanced compiler optimizations (fast math, LTO) (15-35% additional speedup)
- Math function optimizations and efficient memory patterns
- Thread-safe implementation with enterprise-grade DLL stability

âœ… CROSS-PLATFORM 64-BIT BINARIES:
- Windows x64 DLL (301KB) - Ready for deployment
- Linux x64 SO - Docker compatible for cloud deployment
- Zero build dependencies - immediate deployment capability
- Cross-platform compatibility verified and tested

âœ… PRODUCTION VALIDATION ON REAL DATASETS:
- MNIST 70K validation: 10-second processing with clear digit clustering
- 1M Hairy Mammoth validation: 2-3 minute processing with anatomical preservation
- 10K Mammoth validation: 11-second processing with automatic anatomical classification
- Comprehensive testing across all dataset sizes and platforms

âœ… ENHANCED FEATURES:
- Dataset compression: 60% storage savings with automatic zip loading
- Advanced quantization: 16-bit compression with parameter preservation
- Model persistence: Save/load with CRC32 validation
- Multiple distance metrics: Euclidean, Manhattan, Cosine, Hamming (fully supported)
- Real-time progress reporting with phase-aware callbacks
- Memory efficiency: 0.1-0.5MB for datasets up to 10K points

âœ… ENTERPRISE-GRADE STABILITY:
- Thread-safe OpenMP implementation with atomic gradient accumulation
- Integer overflow protection for 1M+ point datasets
- Comprehensive null pointer safety in C++ integration
- Production-ready code without debug artifacts
- Cross-platform build system with Docker support

ðŸŽ¯ BENCHMARK RESULTS:
- 1K samples: 836ms fit time, 6ms transform
- 10K samples: 10.9s fit time, 103ms transform
- 1M samples: ~2-3 minutes with HNSW optimization
- Memory usage: Optimized for enterprise workloads

ðŸ“¦ DEPLOYMENT READY:
- Pre-compiled 64-bit binaries included
- Zero compilation required for most use cases
- Compatible with Windows 10/11 and modern Linux distributions
- Perfect for Docker containers and cloud deployments
]]></PackageReleaseNotes>
    <GeneratePackageOnBuild>true</GeneratePackageOnBuild>
    <IncludeSymbols>true</IncludeSymbols>
    <SymbolPackageFormat>snupkg</SymbolPackageFormat>
    <Copyright>Copyright Â© 2025 ID Soft AB</Copyright>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
    <DebugType>portable</DebugType>
    <DebugSymbols>true</DebugSymbols>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|AnyCPU'">
    <DebugType>portable</DebugType>
    <Optimize>true</Optimize>
  </PropertyGroup>

  <!-- Include enhanced native libraries in the package -->
  <ItemGroup>
    <!-- Windows x64 binary -->
    <Content Include="pacmap.dll">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <Pack>true</Pack>
      <PackagePath>runtimes\win-x64\native\pacmap.dll</PackagePath>
    </Content>

    <!-- Linux x64 binary -->
    <Content Include="libpacmap.so">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <Pack>true</Pack>
      <PackagePath>runtimes\linux-x64\native\libpacmap.so</PackagePath>
    </Content>
  </ItemGroup>

  <!-- Include README in package -->
  <ItemGroup>
    <None Include="..\..\..\README.md">
      <Pack>true</Pack>
      <PackagePath>README.md</PackagePath>
    </None>
  </ItemGroup>

</Project>